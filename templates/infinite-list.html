<div class="row-container header">
    <div class="row">
        <header>
            <h1>List View</h1>

            <div data-ng-include="'templates/partials/main-nav.html'"></div>
        </header>
    </div>
</div>

<div class="row-container list-container">
    <div class="row">

        <div class="table-controls">
            <input type="text" placeholder="Filter Users" data-ng-model="query">
            <button type="button" id="add-user-btn" class="btn btn-primary" data-ng-click="openNewUserForm()">Add New User</button>
        </div>

        <table>
            <thead>
                <th>User Id</th>
                <th>Name</th>
                <th>Contact Email</th>
                <th>Edit</th>
                <th>Suspend User</th>
                <th>Delete</th>
            </thead>
            <tbody infinite-scroll="users.nextPage()"
                    infinite-scroll-disabled="users.busy || users.next_page === null"
                    infinite-scroll-distance="0">
                <tr data-ng-repeat="item in users.items | filter:query" id="{{ item.id }}" class="row-{{ $index + 1 }}">
                    <td>
                        {{ item.id }}
                    </td>
                    <td>
                        {{ item.name }}
                    </td>
                    <td>
                        <a href="mailto:{{ item.email }}">{{ item.email }}</a>
                    </td>
                    <td>
                        <i data-ng-click="openEditForm( item )" class="glyphicon glyphicon-edit"></i>
                    </td>
                    <td>
                        <i data-ng-click="suspendToggle( item )" class="glyphicon glyphicon-ban-circle" data-ng-hide="item.is_suspended"></i>
                        <i data-ng-click="suspendToggle( item )" class="glyphicon glyphicon-ok" data-ng-show="item.is_suspended"></i>
                    </td>
                    <td>
                        <i data-ng-click="openDeleteModal( item )" class="glyphicon glyphicon-remove"></i>
                    </td>
                </tr>
            </tbody>
        </table>
        <div data-ng-show="users.busy">Loading data...</div>
    </div>
</div>

<script type="text/ng-template" id="suspend">
    <h3>Confirm Suspension</h3>
    <p>Do you really want to suspend <strong>{{ user.name }}?</strong></p>

    <button type="button" id="suspend-user-btn" class="btn btn-danger" data-ng-click="suspendUser( user );closeThisDialog();">Suspend User</button>
    <button type="button" class="btn btn-default" data-ng-click="closeThisDialog()">Cancel</button>
</script>